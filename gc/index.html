<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title> GC tools </title>
    <link rel="stylesheet" href="./files/bootstrap.min.css">
    <style>
    .container {
      margin-left: inherit;
      margin-right: inherit;
    }

    body {
      padding : 10px ;
    }

    #content .nav-pills > li > a {
      border-radius: 4px 4px 0 0 ;
    }

    .white {
      color: white;
    }

    #item-name, #category-key, #item-type-key, #serves, #Min, #sections, #info {
      width: 280px;
      margin-bottom: 5px;
    }

    #tag-restrictions, #tag-cooking-style, #tag-allergens, #tag-packaging, #tag-temperature {
      font-size: 12px;
      height: 230px;
      overflow-y: hidden;
      padding: 1px 1px;
    }

    .right {
      float: right;
    }

    .form-control {
      height: 20px;
      padding: 4px 10px;
    }

    #errors {
      color: #FCC;
    }

    #generated-text {
      min-height: 470px;
    }

    #footer {
      font-size: 5px;
      color: #CCC;
      margin: auto;
      width: 50%;
      text-align: center;
    }


    .nav-pills>li.active>a#fullfilments-tab {
      color: #fff;
      background-color: #42b6ca;
    }
    .nav-pills>li.active>a#menu-tab {
      color: #fff;
      background-color: #560814;
    }

    .tab-pane.active.color1 {
      padding : 5px 15px;
      background-color: #560814;
    }
    .tab-pane.active.color2 {
      padding : 5px 15px;
      background-color: #42b6ca;
    }
    
    
    

    #f-mail-customer, #f-mail-caterer, #f-mail-orderedit {
      min-height: 470px;
    }
    
    #f-notes {
      width: 700px;
    }
    </style>
  </head>

<body translate="no">
<div id="content" class="container">
  <ul class="nav nav-pills">
    <li class="active">
      <a href="#1b" data-toggle="tab" id="menu-tab">Menu creation</a>
    </li>
    <li class="">
      <a href="#2b" data-toggle="tab" id="fullfilments-tab">Fulfillments</a>
    </li>
    <li>
      <a href="#3b">Soon...</a>
    </li>
    <li>
      <a href="#4a">Soon...</a>
    </li>
  </ul>
  <div class="tab-content clearfix">
    <div class="tab-pane color1 active" id="1b">
      <div class="row" style="font-size: 14px;">
        <div class="col-md-6">
          <div class="row">
            <div class="col-md-3">
              <label for="item-name" class="white"> Item name </label>
            </div>
            <div class="col-md-8">
              <input type="text" name="item-name" id="item-name" class="form-control">
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <label for="category-key" class="white"> Category </label>
            </div>
            <div class="col-md-8">
              <select id="category-key" name="category-key">
                <option disabled="" selected="">Select category...</option>
                <option value="breakfast-package">Petit-déjeuners, Pauses</option>
                <option value="lunchbox">Lunchbox</option>
                <option value="plateaux-repas">Plateaux Repas</option>
                <option value="buffets">Buffets</option>
                <option value="cocktails">Cocktails</option>
                <option value="appetizers">Planches &amp; Apéro</option>
                <option value="snack-packages">Dessert</option>
                <option value="beverages">Boissons</option>
                <option value="complements">Équipement</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <label class="white" for="item-type-key" title="As we have some items that you can be found in different sections on the caterer profile, only several combinations are possible. Always input first the category key and then the item type">
              Item type
              </label>
            </div>
            <div class="col-md-8">
              <select id="item-type-key" name="item-type-key">
                <option disabled="" selected="">Select category first</option>
              </select>
            </div>
          </div>
          <label for="tag-restrictions" title="Print this tab to have a quick overview of the possible tags you can attached to an item. Tagging properly the items is key for the whole website as it helps the users to find what they need quickly and efficiently.
                    You can set a miximum number of tags for the same group. Here is a breakdown:
                    Restrictions: 4 max
                    Cooking Style: 3 max
                    Allergens: no max
                    Packaging:  1 max
                    Temperature: 1 max
                    Nevertheless, you can add several tags at the same time separating each of them by a coma. No need to differentiate by Group.">
            <span class="white">Tags</span> <br>
            <select id="tag-restrictions" name="tag-restrictions" class="form-control" multiple="">
              <option value="vegetarian">Végétarien</option>
              <option value="gluten-free">Sans gluten</option>
              <option value="kosher">Casher</option>
              <option value="hallal">Halal</option>
              <option value="organic">Bio</option>
              <option value="without-pork">Sans porc</option>
              <option value="cd_m_sans-lactose">Sans Lactose</option>
              <option value="vegan">Végétalien</option>
            </select>
          </label>
          <label for="tag-cooking-style">
            <select id="tag-cooking-style" name="tag-cooking-style" class="form-control" multiple="">
              <option value="french">Français</option>
              <option value="italian">Italien</option>
              <option value="asian">Asiatique</option>
              <option value="american">Americain</option>
              <option value="oriental">Oriental</option>
              <option value="german">Allemand</option>
              <option value="indian">Indien</option>
              <option value="cd_m_african">Africain</option>
            </select>
          </label>
          <label for="tag-allergens">
            <select id="tag-allergens" name="tag-allergens" class="form-control" multiple="">
              <option value="gluten">Gluten</option>
              <option value="molluscs">Mollusques</option>
              <option value="shellfish">Crustacés</option>
              <option value="sulfites">Sulfites</option>
              <option value="celery">Céleri</option>
              <option value="egg">Oeufs</option>
              <option value="soya">Soja</option>
              <option value="milk">Lait</option>
              <option value="mustard">Moutarde</option>
              <option value="peanuts">Arachides</option>
              <option value="lupin">Lupin</option>
              <option value="nuts">Fruits à coque</option>
              <option value="sesame">Sesame</option>
              <option value="fish">Poisson</option>
            </select>
          </label>
          <label for="tag-packaging">
            <select id="tag-packaging" name="tag-packaging" class="form-control" multiple="">
              <option value="cd_m_plastic">Recyclable</option>
              <option value="cd_m_porcelaine">Porcelaine</option>
            </select>
          </label>
          <label for="tag-temperature">
            <select id="tag-temperature" name="tag-temperature" class="form-control" multiple="">
              <option value="cd_m_hot">Livré chaud</option>
              <option value="cd_m_microwave">Micro-ondable</option>
            </select>
          </label>
          <br />
          <div class="row">
            <div class="col-md-4">
              <label for="price-ttc" title="Fill the price excluded vat. Use the coma as separator">
                <span class="white">Price TTC</span> <br>
                <input type="number" id="price-ttc" name="price-ttc" class="form-control">
              </label>
            </div>
            <div class="col-md-2">
              <label for="tax-percent">
                <span class="white"> VAT </span>
                <select id="tax-percent" name="tax-percent">
                  <option value="0">0%</option>
                  <option value="5.5">5,5%</option>
                  <option value="10" selected="">10%</option>
                  <option value="20">20%</option>
                </select>
              </label>
            </div>
            <div class="col-md-4">
              <label for="pexcl-vat" title="Fill the price excluded vat. Use the coma as separator">
                <span class="white">Price HT</span> <br>
                <input type="number" id="pexcl-vat" name="pexcl-vat" class="form-control">
              </label>
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <label for="serves" class="white"> Qtity / Pers </label>
            </div>
            <div class="col-md-8">
              <input type="number" id="serves" name="serves" min="1" value="1" class="form-control">
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <label for="Min" class="white"> Min quantity </label>
            </div>
            <div class="col-md-8">
              <input type="number" id="Min" name="Min" min="1" value="1" class="form-control">
            </div>
          </div>
          <div class="row">
            <div class="col-md-3">
              <label for="sections" class="white">
              Sections
              </label>
            </div>
            <div class="col-md-8">
              <textarea id="sections" name="sections" class="form-control">[]{}</textarea>
            </div>
          </div>
          <hr>
          <div class="row">
            <div class="col-md-3">
              <label for="vat" title="You can fill the TVA or choose to not include this criteria in the item creation. In that case, the VAT takes into account will be the one by default of the caterer.">
                <em class="white">Information</em>
              </label>
            </div>
            <div class="col-md-8">
              <textarea id="info" name="info" class="form-control"></textarea>
            </div>
          </div>
          <button class="btn btn-success right" id="generate-text">
          Generate text
          </button>
        </div>
        <div class="col-md-6">
          <p id="errors"></p>
          <textarea id="generated-text" class="form-control"></textarea>
          <br />
          <button class="btn btn-danger right" id="copy">
          Copy to clipboard
          </button>
        </div>
      </div>
    </div>



    <div class="tab-pane color2" id="2b">
      <div class="row" style="margin: auto;">
        <div class="col-md-12">
          <div class="row">
            <textarea class="form-control" id="order-page-content"></textarea>
          </div>
        </div>
        
        <div class="col-md-12">
          <div class="row">
            <label for="f-order-id">
            <em> Order ID </em>
            <input class="form-control" type="text" name="f-order-id" id="f-order-id">
            </label>
            <label for="f-tpbc">
            <em> TPBC </em>
            <input class="form-control" type="text" name="f-tpbc" id="f-tpbc">
            </label>
            <label for="f-gc-earned">
            <em> GC earned </em>
            <input class="form-control" type="text" name="f-gc-earned" id="f-gc-earned">
            </label>
            <label for="f-date-evt">
            <em> Event date </em>
            <input class="form-control" type="text" name="f-date-evt" id="f-date-evt">
            </label>
          </div>
        </div>
        
        <div class="col-md-12">
          <div class="row">
            <label for="f-p-earned">
            <em> Partner earned </em>
            <input class="form-control" type="text" name="f-p-earned" id="f-p-earned">
            </label>
            <label for="f-delivery-fees">
            <em> Delivery fees </em>
            <input class="form-control" type="text" name="f-delivery-fees" id="f-delivery-fees">
            </label>
            <label for="f-company-id">
            <em> Company </em>
            <input class="form-control" type="text" name="f-company-name" id="f-company-name">
            </label>
            <label for="f-cateringp-name">
            <em> Caterer </em>
            <input class="form-control" type="text" name="f-cateringp-name" id="f-cateringp-name">
            </label>
          </div>
        </div>
        
        <div class="col-md-12">
        
          <hr />
          
          <div class="row">
            <label for="f-issue">
              Issue <br />
              <select id="f-issue" name="f-issue">
                <option value="f-issue-1">Less 30 minutes late</option>
                <option value="f-issue-2">More than 30 minutes but less than 60 minutes late</option>
                <option value="f-issue-3">More than 60 minutes late</option>
                <option value="f-issue-4">Delivery in advance</option>
                <option value="f-issue-5">No delivery at all</option>
                <option value="f-issue-6">Inappropriate delivery</option>
                <option value="f-issue-7">Wrong items delivered</option>
                <option value="f-issue-8">Missing items</option>
                <option value="f-issue-9">Food issues?</option>
                <option value="f-issue-10">Insufficient Quantities?</option>
                <option value="f-issue-11">Caterer not Available?</option>
                <option value="f-issue-12" disabled>Itemschanged</option>
              </select>
            </label>
            
            <label for="f-code">
            Discount code
            <input class="form-control" type="text" name="f-code" id="f-code">
            </label>
            
            <button class="btn btn-primary right" id="generate-mails">
            Generate mails
            </button>
          </div>
        </div>
        
        <div class="col-md-12">
        
          <hr />
          
          <div class="row">
            
            <div class="col-md-4">
              <label> Mail customer </label>
              <textarea id="f-mail-customer" class="form-control"></textarea>
            </div>
            
            <div class="col-md-4">
              <label> Mail caterer </label>
              <textarea id="f-mail-caterer" class="form-control"></textarea>
            </div>
            
            <div class="col-md-4">
              <label> Mail orderedit </label>
              <textarea id="f-mail-orderedit" class="form-control"></textarea>
            </div>
            
          </div>
          
          <div class="row">
            <label for="f-notes">
            Notes
            <input class="form-control" type="text" name="f-notes" id="f-notes">
            </label>
          </div>
          
        </div>

      </div>

    </div>



    <div class="tab-pane" id="3b">
      <p>
      </p>
    </div>



    <div class="tab-pane" id="4b">
      <p>A</p>
    </div>
  </div>
</div>



<div class="row">
<p id="footer">
© Paul &amp; Franck
</p>
</div>

<div id="username-modal" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog modal-sm" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <h4>
          Please enter your username.
        </h4>
        <br />
        <label for="username">
          Username:&nbsp;&nbsp;&nbsp;
          <input type="text" name="username" id="username" />
        </label>
      </div>
      <div class="modal-footer">
        <button id="save-username" type="button" class="btn btn-primary" data-dismiss="modal">Save</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>



<script src="files/jquery.min.js"></script>
<script src="files/bootstrap.min.js"></script>
<script src="files/egg.min.js"></script>
<script src="https://gctools-0c1f.restdb.io/rest/_jsapi.js"></script>
<img style="position: absolute; top: 33%; left: 25%; display: none;" id="egg1" src="files/giphy.gif">
<img style="position: absolute; top: 33%; left: 25%; display: none;" id="egg2" src="files/giphy(1).gif">
<script id="rendered-js">

///////////////////
// MENU CREATION
// MAVEN
//////////////////

var itemOptionsBreakfastPackage = {
  "Petit-déjeuners, Pauses": "breakfast-package",
  Fruits: "fruits",
  "Jus & Softs": "non-alcoholic-beverage",
  "Boissons Chaudes": "hot-beverage"
};

var itemOptionsLunchbox = {
  Lunchbox: "lunchbox"
};

var itemOptionsPlateauxRepas = {
  "Plateaux Repas": "plateaux-repas"
};

var itemOptionsBuffets = {
  Fingerfood: "sandwich-platter",
  Formule: "sandwich-platter-formula",
  "Plats à partager": "shared-meals"
};

var itemOptionsCocktails = {
  "Pièces salées": "cocktail-delivery",
  "Pièces sucrées": "sweet-cocktail-delivery",
  "Pièces mixtes": "mixed-cocktail-delivery"
};

var itemOptionsAppetizers = {
  "Planches & Apéro": "appetizers"
};

var itemOptionsSnackPackages = {
  Dessert: "snack-packages",
  Fruits: "fruits",
  "Pièces sucrées": "sweet-cocktail-delivery"
};

var itemOptionsBeverages = {
  "Jus & Softs": "non-alcoholic-beverage",
  "Boissons Chaudes": "hot-beverage",
  "Boissons alcoolisées": "alcoholic-beverage"
};

var itemOptionsComplements = {
  Équipement: "complements"
};

if (typeof(Storage) !== "undefined") {
  var username = window.localStorage.getItem('username');
  if (!username || username == "") {
    $('#username-modal').modal();
  }
  else {
    console.log(`${username} successfully connected`);
  }
}

$("#save-username").click(function() {
  var usernameInput = $("#username").val();
  var sanitizedUsername = usernameInput.replace(/[^a-z0-9áéíóúñü \.,_-]/gim,"").trim();
  window.localStorage.setItem('username', usernameInput);
});

var db = new restdb("5d4c48e558a35b31adeba5ff");
var menuGlobal = '';

async function tracking() {
  try {
    var obj = new db.menucreations(
      {
        "date": new Date(),
        "browser": navigator.appVersion,
        "username": window.localStorage.getItem('username'),
        "menu": menuGlobal
      });
    console.log(obj);
    await obj.save();
    menuGlobal = '';
  }
  catch (err) {
    console.log(err);
  }
}

async function fulfillmenttracking() {
  try {
    var obj = new db.fulfillments(
      {
        "date": new Date(),
        "username": window.localStorage.getItem('username')
      });
    console.log(obj);
    await obj.save();
  }
  catch (err) {
    console.log(err);
  }
}

function generateText() {
  if ($("#item-name").val() === null) {
    $("#errors").text("You should fill the item name");
    return;
  }
  if ($("#category-key").val() === null) {
    $("#errors").text("You should fill the category");
    return;
  }
  if ($("#pexcl-vat").val() === "") {
    $("#errors").text("You should fill the price excluded VAT");
    return;
  }
  if ($("#item-name").val() === "") {
    $("#errors").text("You should fill the item name");
    return;
  }
  $("#errors").text("");

  let text = "";
  text += "# " + $("#item-name").val();
  text += " @cat=" + $("#category-key").val();
  text += " @type=" + $("#item-type-key").val();

  text += " @tags=";
  let tag1 = $("#tag-restrictions").val() || [];
  let tag2 = $("#tag-cooking-style").val() || [];
  let tag3 = $("#tag-allergens").val() || [];
  let tag4 = $("#tag-packaging").val() || [];
  let tag5 = $("#tag-temperature").val() || [];
  let tags = tag1.concat(tag2, tag3, tag4, tag5);
  text += tags.join();

  text += " @pexcl-vat=" + $("#pexcl-vat").val();
  text += " @vat=" + $("#tax-percent").val();
  text += " @serves=" + $("#serves").val();
  text += " @min=" + $("#Min").val();
  text += " " + $("#sections").val();

  let info = $("#info").val();
  if (info !== "") {
    text += " @info=" + info;
  }

  let generatedText = $("#generated-text").val();
  $("#generated-text").val(generatedText + text + "\n\n");

  $("#tag-restrictions").val("");
  $("#tag-cooking-style").val("");
  $("#tag-allergens").val("");
  $("#tag-packaging").val("");
  $("#tag-temperature").val("");

  $("#item-name").val("");
  $("#vat").val("");
  $("#info").val("");
  $("#pexcl-vat").val("");
  $("#price-ttc").val("");
  $("#serves").val("1");
  $("#Min").val("1");
  $("#sections").val("[]{}");
  $("#tax-percent").val(10);

  menuGlobal = text;
}

$("#generate-text").click(function() {
  generateText();
  setTimeout(tracking, 10);
});

$("#category-key").change(function() {
  var itemList = $("#item-type-key");
  var itemOptions = {};

  switch ($("#category-key").val()) {
    case "breakfast-package":
      itemOptions = itemOptionsBreakfastPackage;
      break;
    case "lunchbox":
      itemOptions = itemOptionsLunchbox;
      break;
    case "plateaux-repas":
      itemOptions = itemOptionsPlateauxRepas;
      break;
    case "buffets":
      itemOptions = itemOptionsBuffets;
      break;
    case "cocktails":
      itemOptions = itemOptionsCocktails;
      break;
    case "appetizers":
      itemOptions = itemOptionsAppetizers;
      break;
    case "snack-packages":
      itemOptions = itemOptionsSnackPackages;
      break;
    case "beverages":
      itemOptions = itemOptionsBeverages;
      break;
    case "complements":
      itemOptions = itemOptionsComplements;
      break;
    default:
      itemOptions = itemOptionsBreakfastPackage;
  }

  itemList.empty(); // remove old options
  $.each(itemOptions, function(key, value) {
    itemList.append(
      $("<option></option>")
        .attr("value", value)
        .text(key)
    );
  });
});

$(document).ready(function() {
  var last_valid_selection_restrictions = null;
  $("#tag-restrictions").change(function(event) {
    if ($(this).val().length > 4) {
      $(this).val(last_valid_selection_restrictions);
    } else {
      last_valid_selection_restrictions = $(this).val();
    }
  });

  var last_valid_selection_cooking_style = null;
  $("#tag-cooking-style").change(function(event) {
    if ($(this).val().length > 3) {
      $(this).val(last_valid_selection_cooking_style);
    } else {
      last_valid_selection_cooking_style = $(this).val();
    }
  });

  var last_valid_selection_packaging = null;
  $("#tag-packaging").change(function(event) {
    if ($(this).val().length > 1) {
      $(this).val(last_valid_selection_packaging);
    } else {
      last_valid_selection_packaging = $(this).val();
    }
  });

  var last_valid_selection_temperature = null;
  $("#tag-temperature").change(function(event) {
    if ($(this).val().length > 1) {
      $(this).val(last_valid_selection_temperature);
    } else {
      last_valid_selection_temperature = $(this).val();
    }
  });

  $("#price-ttc").keyup(function(event) {
    let ttc = parseFloat($("#price-ttc").val());
    let tax = parseFloat($("#tax-percent").val());
    let ht = ttc / ((100 + tax) / 100);
    $("#pexcl-vat").val(ht.toFixed(2));
  });

  $("#tax-percent").change(function(event) {
    let ttc = parseFloat($("#price-ttc").val());
    let tax = parseFloat($("#tax-percent").val());
    let ht = ttc / ((100 + tax) / 100);
    $("#pexcl-vat").val(ht.toFixed(2));
  });

  $("#copy").click(function(event) {
    var $temp = $("<input>");
    $("body").append($temp);
    $temp.val($("#generated-text").val()).select();
    document.execCommand("copy");
    $temp.remove();
  });
});

var egg1 = new Egg("p,a,u,l", function() {
  $("#egg1").fadeIn(500, function() {
    window.setTimeout(function() {
      $("#egg1").hide();
    }, 3000);
  });
}).listen();

var egg2 = new Egg("f,r,a,n,c,k", function() {
  $("#egg2").fadeIn(500, function() {
    window.setTimeout(function() {
      $("#egg2").hide();
    }, 3000);
  });
}).listen();

/////////////////////
// FULFILLMENTS
//
////////////////////

  $("#order-page-content").keyup(function(event) {
    var content = $("#order-page-content").val();

    // Order ID
    var regExp1 = /Order ([a-f\d]{24}).*$/gm;
    var orderIdArr = regExp1.exec(content);
    if (orderIdArr !== null && orderIdArr.length > 1) {
      $("#f-order-id").val(orderIdArr[1]);
    }

    // Total paid by client
    var regExp2 = /Total paid by Client	(\d* *\d+,\d{2}).*$/gm;
    var tpbcArr = regExp2.exec(content);
    if (tpbcArr !== null && tpbcArr.length > 1) {
      $("#f-tpbc").val(tpbcArr[1]);
    }

    // GC earned
    var regExp3 = /GC Earned	(\d* *\d+,\d{2}).*$/gm;
    var gceArr = regExp3.exec(content);
    if (gceArr !== null && gceArr.length > 1) {
      $("#f-gc-earned").val(gceArr[1]);
    }

    // Event date
    var regExp4 = /Delivery Time: (\d{2}\/\d{2}\/\d{4} \d{2}:\d{2}).*$/gm;
    var dateArr = regExp4.exec(content);
    if (dateArr !== null && dateArr.length > 1) {
      $("#f-date-evt").val(dateArr[1]);
    }

    // Partner earned
    var regExp5 = /Partner Earned	(\d* *\d+,\d{2}).*$/gm;
    var peArr = regExp5.exec(content);
    if (peArr !== null && peArr.length > 1) {
      $("#f-p-earned").val(peArr[1]);
    }

    // Delivery fees
    var regExp6 = /Delivery fee	(\d* *\d+,\d{2}).*$/gm;
    var deliveryFeesArr = regExp6.exec(content);
    if (deliveryFeesArr !== null && deliveryFeesArr.length > 1) {
      $("#f-delivery-fees").val(deliveryFeesArr[1]);
    }
    
    // Company
    var regExp7 = /Company\n(.*)/m;
    var companyArr = regExp7.exec(content);
    if (companyArr !== null && companyArr.length > 1) {
      $("#f-company-name").val(companyArr[1]);
    }
    
    // Caterer
    var regExp8 = /Partner\n(.*)-/m;
    var catererArr = regExp8.exec(content);
    if (catererArr !== null && catererArr.length > 1) {
      $("#f-cateringp-name").val(catererArr[1]);
    }
  });
  
var text30MinutesLate = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR. Nous sommes sincèrement navrés que cette commande ait été livrée avec du retard.\n
L\'ambition de GoCater est justement de simplifier et de fluidifier la commande des besoins traiteur des entreprises, un retard de livraison sur une commande de la part d\'un partenaire est donc en contradiction avec nos valeurs et celles de traiteurs disponibles sur notre site internet.\n
A titre de dédommagement, le traiteur TRAITEUR s\'engage donc à prendre à sa charge le montant des frais de livraison, soit FRAIS DE LIVRAISON €. \n
N\'hésitez surtout pas à me contacter par retour d\'email ou au 01.76.44.02.38, je me tiens entièrement disponible pour échanger avec vous sur cet incident.\n
En vous souhaitant une excellente journée,\n
Bien cordialement\n`;

var text30LessThan60 = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR. Nous sommes sincèrement navrés que cette commande ait été livrée avec avec un tel retard.\n
L\'ambition de GoCater est justement de sécuriser la commande et simplifier les besoins traiteur des entreprises, un retard de livraison sur une commande de la part d\'un partenaire est donc en contradiction avec nos valeurs et celles de traiteurs disponibles sur notre site internet.\n
Aussi, le traiteur TRAITEUR s\'engage donc à prendre à sa charge le montant des frais de livraison et tient aussi à vous faire 10% sur le total de votre commande. Le montant à déduire de votre facture sera donc de FRAIS DE LIVRAISON + 10% PARTNER EARNED €.\n
N\'hésitez surtout pas à me contacter par retour d\'email ou au 01.76.44.02.38, je me tiens entièrement disponible.\n
En vous souhaitant une excellente journée,\n
Bien cordialement\n`;

var textMoreThan60 = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR Nous sommes sincèrement navrés pour le retard important sur cette livraison.\n
L\'ambition de GoCater est justement de sécuriser la commande des besoins traiteur des entreprises, ce retard sur une commande est en contradiction avec nos valeurs et nous nous en excusons.\n
Aussi, le traiteur TRAITEUR s\'engage donc à prendre à sa charge le montant total des frais de livraison et tient à vous faire bénéficier de 30% de remise immédiate sur le total de votre commande. Le montant à déduire de votre facture sur cette commande sera donc de FRAIS DE LIVRAISON + 30% PARTNER EARNED €. \n
Pour vous témoigner de notre ambition d\'aider les traiteurs à améliorer leur service, nous souhaitons également vous offrir un bon d\'achat de DISCOUNT CODE VALUE € à utiliser sur votre prochaine commande. Le code s\'utilise sur la page de confirmation de commande.\n
Votre code promotionnel à utiliser lors de votre prochaine commande est: DISCOUNT CODE \n
N\'hésitez surtout pas à me contacter par retour d\'email ou au 01.76.44.02.38, je me tiens entièrement disponible pour tout explication concernant cet incident et le geste commercial. \n
En vous souhaitant une excellente journée,\n
Bien cordialement\n`;

var textDeliveryInAdvance = `
Bonjour Madame,\n
Je reviens vers vous au sujet de votre commande du DATE chez TRAITEUR, arrivée en avance et qui n’est donc pas en conformité avec les instructions que vous nous aviez communiquées. Nous sommes totalement conscients que cela ait pu désorganiser la préparation de cet événement et donc votre journée. Nous en sommes tout à fait désolés.\n 
Le traiteur est navré de ce désagrément et souhaite à ce titre vous offrir la totalité des frais de livraison en les prenant à sa charge. La remise appliquée sur la facture de cette commande sera donc de FRAIS DE LIVRAISON €.\n
Je reste à votre entière disposition pour toute question, et vous souhaite une excellente journée.\n
Bien cordialement,\n`;

var textNoDeliveryAtAll = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR. Nous sommes sincèrement navrés que cette commande n\'ait pas été livrée. Nous sommes conscients des conséquences d\’un tel incident sur votre l\’organisation de votre journée de travail mais également sur votre image au sein de l\’entreprise.\n
L\'ambition de GoCater est justement de sécuriser la commande et simplifier les besoins traiteur des entreprises, une non prise en charge de votre commande est donc en contradiction totale avec nos valeurs et celles de nos traiteurs partenaires disponibles sur notre site internet.\n
Le traiteur TRAITEUR s\'engage donc à ne pas vous facturer cette commande et à vous offrir une remise sur votre prochaine commande. Pour ce faire, vous pouvez utiliser le code de réduction DISCOUNT CODE au moment de confirmer votre prochaine commande avec ce traiteur.\n
N\'hésitez surtout pas à me contacter par retour d\'email ou au 01.76.44.02.38, je me tiens entièrement disponible pour répondre à vos interrogations ou toute question concernant l\'utilisation de cette réduction.\n
L\'ensemble de l\'équipe de GoCater est à votre service pour vous apporter la meilleure expérience possible, pour vous aider dans toutes vos démarches et pour vous simplifier la vie. N\'hésitez pas à nous contacter, nous sommes à votre entière disposition pour répondre à l\'ensemble de vos attentes.\n
En vous souhaitant une excellente journée,\n
Bien cordialement\n`;

var textInappropriateDelivery = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR. Nous sommes sincèrement navrés que cette livraison n\'ait pas été en adéquation avec votre commande et donc avec vos attentes.\n
L\'ambition de GoCater est justement de simplifier la commande des besoins traiteur des entreprises et un oubli d\'articles dans une commande est en contradiction avec nos valeurs, nous en sommes navrés.\n
Pour vous témoigner de notre ambition d\'aider les traiteurs à améliorer leur service, nous souhaitons appliquer un geste commercial sur la facture, il correspond à la gratuité des frais de livraison ainsi que 10% sur l\'alimentaire. Le montant de ce geste est donc de TOTAL GESTE COMMERCIAL €.\n
N\'hésitez pas à revenir vers nous par retour d\'email ou au 01.76.44.02.38 si le geste ne vous semble pas approprié ou bien si vous souhaitez en discuter, nous sommes entièrement disponibles et ouverts à la discussion.\n
Bien à vous,\n`;

var textWrongItemDelivered = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR. Nous sommes sincèrement navrés que cette livraison n'ait pas été en adéquation avec vos attentes et que les articles livrés ne soient pas ceux que vous avez commandé sur notre site.\n
L\'ambition de GoCater est justement de simplifier la commande des besoins traiteur des entreprises et un oubli d\'articles dans une commande est en contradiction avec nos valeurs, nous en sommes désolés.\n
Pour vous témoigner de notre ambition d\'aider les traiteurs à améliorer leur service, nous souhaitons appliquer un geste commercial sur la facture, il correspond à la gratuité des frais de livraison ainsi que 10% sur l\'alimentaire. Le montant de ce geste est donc de TOTAL GESTE COMMERCIAL €.\n
N\'hésitez pas à revenir vers nous par retour d\'email ou au 01.76.44.02.38 si le geste ne vous semble pas approprié ou bien si vous souhaitez en discuter, nous sommes entièrement disponibles et ouverts à la discussion.\n
Bien cordialement\n`;

var textMissingItems = `
Bonjour, \n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR et pour laquelle il manquait certains articles.\n
L\'ambition de GoCater est justement de sécuriser vos commandes traiteur des entreprises et un oubli dans une commande est en contradiction avec nos valeurs, nous en sommes navrés. \n
Bien évidemment, le traiteur TRAITEUR s\'engage à ne pas vous facturer les articles non livrés mais aussi à titre de dédommagement, à vous offrir les frais de livraison.\n
De plus, nous avons décidé, conjointement, de vous faire bénéficier d\'une remise de 10% sur le total de la facture. Le montant de la remise commerciale imputée sur la facture de votre commande est de 10% PARTNER EARNED €. \n
N\'hésitez pas à revenir vers nous par retour d\'email ou au 01.76.44.02.38 si le geste ne vous semble pas approprié ou bien si vous souhaitez en discuter, nous sommes entièrement disponibles et ouverts à la discussion. \n
En vous souhaitant une excellente journée, \n
Bien cordialement\n`;

var textFoodIssues = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR Nous sommes sincèrement navrés que cette commande traiteur ne se soit pas déroulée selon vos souhaits et vos attentes.\n
L\'ambition de GoCater est justement de conseiller au mieux les entreprises en matière de traiteur, pour que vous puissiez commander en toute confiance, ce type de problème dans une commande est en contradiction avec nos valeurs, nous en sommes désolés.\n
Bien évidemment, le traiteur TRAITEUR s\'engage à ne pas vous facturer les articles, mais aussi pour s\'excuser à ne pas vous facturer les frais de livraison. De plus, nous avons décidé, conjointement, de vous faire bénéficier d\'une remise de 10% sur le total de la facture. Le montant des articles non facturés est de ARTICLES NON FACTURÉS €, celui de la remise commerciale imputée sur la facture de votre commande est de REMISE COMMERCIALE €.\n
N\'hésitez pas à revenir vers nous par retour d\'email ou au 01.76.44.02.38 si le geste ne vous semble pas approprié ou bien si vous souhaitez en discuter, nous sommes entièrement disponibles et ouverts à la discussion.\n
En vous souhaitant une excellente journée,\n
Bien cordialement\n`;

var textInsufficientQuantities = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR.  Nous sommes sincèrement navrés que cette commande traiteur n\'ait pas été au niveau de vos attentes en terme de quantité.\n
L\'ambition de GoCater est justement de simplifier la commande des besoins traiteur des entreprises, mais aussi que vous puissiez commander en toute confiance, ce type de problème dans une commande est en contradiction avec nos valeurs, nous en sommes navrés.\n
A titre de dédommagement, nous souhaitons vous offrir un bon d\'achat de DISCOUNT CODE VALUE € à utiliser sur votre prochaine commande. Le code s\'utilise sur la page de confirmation de commande.\n
Votre code promotionnel à utiliser lors de votre prochaine commande est: DISCOUNT CODE \n
N\'hésitez pas à revenir vers nous par retour d\'email ou au 01.76.44.02.38 si le geste ne vous semble pas approprié ou bien si vous souhaitez en discuter, nous sommes entièrement disponibles et ouverts à la discussion.\n
En vous souhaitant une excellente journée,\n
Bien cordialement\n`;

var textCatererNotAvailable = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR. Nous sommes sincèrement navrés pour la non disponibilité du traiteur...\n
L\'ambition de GoCater est justement de simplifier la commande des besoins traiteur des entreprises, une erreur de disponibilité est donc en contradiction avec nos valeurs et celles de traiteurs disponibles sur notre site internet.\n
A titre de dédommagement, nous souhaitons vous offrir un bon d\'achat de DISCOUNT CODE VALUE € à utiliser sur votre prochaine commande. Le code s\'utilise sur la page de confirmation de commande.\n
Votre code promotionnel à utiliser lors de votre prochaine commande est: DISCOUNT CODE \n
N\'hésitez surtout pas à me contacter par retour d\'email ou au 01.76.44.02.38, je me tiens entièrement disponible.\n
En vous souhaitant une excellente journée,\n
Bien cordialement\n`;

var textItemChanged = `
Bonjour,\n
Je me permets de vous contacter au sujet de votre commande du DATE chez TRAITEUR. Nous sommes sincèrement désolés pour le changement de produits de dernière minute...\n
L\'ambition de GoCater est justement de simplifier la commande des besoins traiteur des entreprises, et nous nous efforçons au maximum de maintenir le meilleur niveau de service. Il arrive cependant que certains produits ne soient plus disponibles et nous nous donnons pour mission de vous trouver la meilleur alternative possible afin que votre événement n\’en soit pas affecté.\n
A titre de dédommagement, nous souhaitons vous offrir un bon d\'achat de DISCOUNT CODE VALUE € à utiliser sur votre prochaine commande. Le code s\'utilise sur la page de confirmation de commande.\n
Votre code promotionnel à utiliser lors de votre prochaine commande est: DISCOUNT CODE \n
N\'hésitez surtout pas à me contacter par retour d\'email ou au 01.76.44.02.38, je me tiens entièrement disponible.\n
En vous souhaitant une excellente journée,\n
Bien cordialement\n`;



  $("#generate-mails").click(function() {
    generateMails();
    setTimeout(fulfillmenttracking, 10);
  });
  
  function generateMails() {
    var code = $("#f-code").val();
    var issue = $("#f-issue").val();
    var generatedMailCaterer = "";
    var generatedMailCustomer = "";
    var generatedMailOrderEdit = "";
    var totalGesteCommercial = "0";
    var remiseCommerciale = "0";
    
    // Less 30 minutes late
    if (issue == "f-issue-1") {
      generatedMailCustomer = text30minutesLate;
    }
    // More than 30 minutes but less than 60 minutes late
    if (issue == "f-issue-2") {
      generatedMailCustomer = text30lessthan60;
    }
    // More than 60 minutes late
    if (issue == "f-issue-3") {
      generatedMailCustomer = textmorethan60;
    }
    // Delivery in advance
    if (issue == "f-issue-4") {
      generatedMailCustomer = textdeliveryinAdvance;
    }
    // No delivery at all
    if (issue == "f-issue-5") {
      generatedMailCustomer = textnodeliveryatAll;
    }
    // Inappropriate delivery
    if (issue == "f-issue-6") {
      generatedMailCustomer = textinappropriateDelivery;
    }
    // Wrong items delivered
    if (issue == "f-issue-7") {
      generatedMailCustomer = textwrongitemDelivered;
    }
    // Missing items
    if (issue == "f-issue-8") {
      generatedMailCustomer = textmissingItems;
    }
    // Food issues?
    if (issue == "f-issue-9") {
      generatedMailCustomer = textfoodIssues;
    }
    // Insufficient Quantities?
    if (issue == "f-issue-10") {
      generatedMailCustomer = textinsufficientQuantities;
    }
    // Caterer not Available?
    if (issue == "f-issue-11") {
      generatedMailCustomer = textcatererNotavailable;
    }
    // Itemschanged
    if (issue == "f-issue-12") {
    
    }

    generatedMailCustomer = generatedMailCustomer.replace(/DATE/g, $("#f-date-evt").val());
    generatedMailCustomer = generatedMailCustomer.replace(/TRAITEUR/g, $("#f-cateringp-name").val());
    generatedMailCustomer = generatedMailCustomer.replace(/FRAIS DE LIVRAISON/g, $("#f-delivery-fees").val());
    generatedMailCustomer = generatedMailCustomer.replace(/DISCOUNT CODE/g, $("#f-code").val());
    generatedMailCustomer = generatedMailCustomer.replace(/TOTAL GESTE COMMERCIAL/g, totalGesteCommercial);
    generatedMailCustomer = generatedMailCustomer.replace(/REMISE COMMERCIALE/g, remiseCommerciale);
    
    $("#f-mail-customer").val(generatedMailCustomer);
    $("#f-mail-caterer").val(generatedMailCaterer);
    $("#f-mail-orderedit").val(generatedMailOrderEdit);
  };
  
  
    </script>


</body>
</html>
